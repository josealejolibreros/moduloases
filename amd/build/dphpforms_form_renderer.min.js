define(["jquery","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui","block_ases/select2"],function(a,b,c,d,e){return{init:function(){function b(b,c){a.get("../managers/dphpforms/dphpforms_forms_core.php?form_id="+b+"&record_id="+c,function(b){a("#body_editor").html(""),a("#body_editor").append(b),a("#permissions_informationr").html("");var c=a(".dphpforms-record").find(".revisado_profesional").find(".checkbox").find("input[type=checkbox]").prop("checked"),d=a(".dphpforms-record").find(".revisado_practicante").find(".checkbox").find("input[type=checkbox]").prop("checked");(c||d)&&a(".dphpforms-record").find(".btn-dphpforms-delete-record").remove();for(var e=JSON.parse(a("#permissions_information").text()),f=0;f<e.behaviors_permissions.length;f++){for(var g=e.behaviors_permissions[f].behaviors[0],h=g.behaviors_accessibility,i=0;i<h.length;i++){var j=h[i].disabled;"true"==j?j=!0:"false"==j&&(j=!1),a(".dphpforms-record").find("#"+h[i].id).prop("disabled",j),a(".dphpforms-record").find("."+h[i]["class"]).prop("disabled",j)}for(var k=g.behaviors_fields_to_remove,i=0;i<k.length;i++)a(".dphpforms-record").find("#"+k[i].id).remove(),a(".dphpforms-record").find("."+k[i]["class"]).remove();for(var l=g.limpiar_to_eliminate,i=0;i<l.length;i++)a(".dphpforms-record").find("."+l[i]["class"]+".limpiar ").remove()}a("#permissions_informationr").html("")})}a("#button_add_v2_track").on("click",function(){a("#modal_v2_peer_tracking").fadeIn(300);var b=a("#codigo").val();a(".id_estudiante").find("input").val(b);var c=a("#current_user_id").val();a(".id_creado_por").find("input").val(c)}),a(".mymodal-close").click(function(){a(this).parent().parent().parent().parent().fadeOut(300)}),a(".dphpforms-peer-record").on("click",function(){var c=a(this).attr("data-record-id");b("seguimiento_pares",c),a("#modal_v2_edit_peer_tracking").fadeIn(300)}),a(".limpiar").click(function(){a(this).parent().find(".opcionesRadio").find("div").each(function(){a(this).find("label").find("input").prop("checked",!1)})}),a(document).on("click",".limpiar",function(){a(this).parent().find(".opcionesRadio").find("div").each(function(){a(this).find("label").find("input").prop("checked",!1)})}),a(document).on("submit",".dphpforms",function(b){b.preventDefault();var c=new FormData(this),d=a(this),e=d.attr("action");"procesador.php"==d.attr("action")&&(e="../managers/dphpforms/procesador.php"),a.ajax({type:"POST",url:e,data:c,cache:!1,contentType:!1,processData:!1,success:function(b){var c=JSON.parse(b);if(console.log(b),0==c.status){var d="";"Stored"==c.message?d="Almacenado":"Updated"==c.message&&(d="Actualizado"),swal({title:"Información",text:d,type:"success"},function(){"Updated"==c.message&&a("#dphpforms-peer-record-"+a("#dphpforms_record_id").val()).stop().animate({backgroundColor:"rgb(175, 255, 173)"},400).animate({backgroundColor:"#f5f5f5"},4e3)}),a(".dphpforms-response").trigger("reset"),a("#modal_v2_edit_peer_tracking").fadeOut(300),a("#modal_v2_peer_tracking").fadeOut(300)}else if(c.status==-2){var d="";"Without changes"==c.message?d="No hay cambios que registrar":"Unfulfilled rules"==c.message&&(d="Revise los valores ingresados"),swal("Alerta",d,"warning")}else c.status==-1&&(console.log(b),swal("ERROR!","Oops!, informe de este error","error"))},error:function(a){console.log(a),swal("Error!","Oops!, informe de este error","error")}})}),a(document).on("click",".btn-dphpforms-delete-record",function(){swal({title:"Confirmación",text:"Está eliminando este registro, ¿desea continuar?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, Eliminar!"},function(b){if(b){var c=a(".btn-dphpforms-delete-record").attr("data-record-id");a.get("../managers/dphpforms/dphpforms_delete_record.php?record_id="+c,function(b){var d=b;0==d.status?swal({title:"Información",text:"Eliminado",type:"success"},function(){a("#modal_v2_edit_peer_tracking").fadeOut(300),a("#dphpforms-peer-record-"+c).remove()}):d.status==-1&&swal("Error!",d.message,"error")})}})})}}});